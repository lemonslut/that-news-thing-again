<header class="mb-8">
  <h1 class="text-3xl font-bold">Concepts</h1>
  <p class="text-base-content/60 mt-1">Entities extracted from articles</p>
  <nav class="flex gap-4 mt-4">
    <%= link_to "Articles", articles_path, class: "btn outline info sm" %>
    <%= link_to "Stories", stories_path, class: "btn outline info sm" %>
    <%= link_to "Concepts", concepts_path, class: "btn solid info sm" %>
    <%= link_to "Trends", trends_path, class: "btn outline info sm" %>
  </nav>
</header>

<%= form_with url: concepts_path, method: :get, class: "mb-6", data: { turbo_frame: "_top" } do |f| %>
  <div class="flex gap-2">
    <%= f.search_field :q, value: params[:q], placeholder: "Search concepts...", class: "input solid flex-1" %>
    <%= f.submit "Search", class: "btn solid info" %>
    <% if params[:q].present? || params[:type].present? %>
      <%= link_to "Clear", concepts_path, class: "btn outline bw" %>
    <% end %>
  </div>
<% end %>

<nav class="tabs pill mb-6">
  <%= link_to "All", concepts_path(q: params[:q]), class: "tab #{params[:type].blank? ? 'active' : ''}" %>
  <%= link_to "People", concepts_path(type: "person", q: params[:q]), class: "tab #{params[:type] == 'person' ? 'active' : ''}" %>
  <%= link_to "Organizations", concepts_path(type: "org", q: params[:q]), class: "tab #{params[:type] == 'org' ? 'active' : ''}" %>
  <%= link_to "Locations", concepts_path(type: "loc", q: params[:q]), class: "tab #{params[:type] == 'loc' ? 'active' : ''}" %>
  <%= link_to "Topics", concepts_path(type: "wiki", q: params[:q]), class: "tab #{params[:type] == 'wiki' ? 'active' : ''}" %>
</nav>

<div class="flex items-center justify-between mb-6 text-sm text-base-content/60">
  <span><%= @concepts.total_count %> concepts</span>
  <span>Page <%= @concepts.current_page %> of <%= @concepts.total_pages %></span>
</div>

<main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <% @concepts.each do |concept| %>
    <%= link_to concept_path(concept), class: "card border border-base-300 p-4 hover:border-primary transition-colors" do %>
      <div class="flex items-center justify-between mb-2">
        <span class="badge outline <%= concept_type_color(concept.concept_type) %> sm"><%= concept.concept_type %></span>
        <span class="text-sm text-base-content/50"><%= concept.articles_count %> articles</span>
      </div>
      <h3 class="font-semibold"><%= concept.label %></h3>
    <% end %>
  <% end %>
</main>

<nav class="flex items-center justify-center gap-2 mt-8">
  <%= paginate @concepts, params: { q: params[:q], type: params[:type] } %>
</nav>
