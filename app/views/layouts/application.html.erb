<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <title><%= content_for(:title) || "News Digest" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <%= javascript_importmap_tags %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body class="bg-base-100 text-base-content min-h-screen">
    <header class="border-b border-base-300 bg-base-200/50">
      <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
        <nav class="flex items-center gap-4">
          <%= link_to "Articles", articles_path, class: "text-sm hover:text-primary transition-colors #{request.path.start_with?('/articles') || request.path == '/' ? 'text-primary font-medium' : 'text-base-content/60'}" %>
          <%= link_to "Stories", stories_path, class: "text-sm hover:text-primary transition-colors #{request.path.start_with?('/stories') ? 'text-primary font-medium' : 'text-base-content/60'}" %>
          <%= link_to "Trends", trends_path, class: "text-sm hover:text-primary transition-colors #{request.path.start_with?('/trends') ? 'text-primary font-medium' : 'text-base-content/60'}" %>
        </nav>
        <% if authenticated? %>
          <div class="flex items-center gap-3">
            <span class="text-sm text-base-content/60"><%= Current.session&.user&.email_address %></span>
            <%= button_to "Sign out", session_path, method: :delete, class: "btn outline bw xs" %>
          </div>
        <% end %>
      </div>
    </header>
    <div class="max-w-4xl mx-auto px-4 py-8">
      <%= yield %>
    </div>
  </body>
</html>
